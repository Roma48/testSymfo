{% extends '::base.html.twig' %}

{% block body %}

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h3>
                Нове завдання:
                <div class="pull-right">
                    <a href="{{ path('cto_jobs_home') }}" class="btn btn-sm btn-default"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;&nbsp;Назад</a>
                    <a href="{{ path('cto_jobs_new') }}" class="btn btn-sm btn-success"><i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;Нове завдання</a>
                </div>
            </h3>
            <div class="text-center filter-form">
                <br>
                {{ form_start(filterForm, {'action': path('cto_jobs_filter'), 'attr': {'novalidate': 'novalidate'}}) }}
                {{ form_widget(filterForm.fullName) }}
                {#{{ form_widget(filterForm.jobCategory) }}#}
                {{ form_widget(filterForm.dateFrom) }}
                {{ form_widget(filterForm.dateTo) }}
                <div class="hidden">
                    {{ form_rest(filterForm) }}
                </div>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="submit" class="btn btn-default"><i class="fa fa-filter fa-fw"></i>&nbsp;Фільтрувати</button>
                &nbsp;&nbsp;&nbsp;
                <a href="{{ path('cto_jobs_list') }}" class="btn btn-warning"><i class="fa fa-refresh fa-fw"></i>&nbsp;Відміна</a>
                {{ form_end(filterForm) }}
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
            <br>
            <table class="table table-hover">
                <thead>
                <tr>
                    {% if paginator %}
                        <th class="text-center">{{ knp_pagination_sortable(jobs, 'Id', 'j.id') }}</th>
                        <th>{{ knp_pagination_sortable(jobs, 'First name', 'cc.firstName') }}</th>
                        <th>{{ knp_pagination_sortable(jobs, 'Last name', 'cc.lastName') }}</th>
                        <th>{{ knp_pagination_sortable(jobs, 'Car', 'm.name') }}</th>
                        <th>{{ knp_pagination_sortable(jobs, 'Visited date', 'j.jobDate') }}</th>
                        <th class="text-center">Actions</th>
                    {% else %}
                        <th class="text-center">Id</th>
                        <th>First name</th>
                        <th>Last name</th>
                        <th>Car</th>
                        <th>Visited date</th>
                        <th class="text-center">Actions</th>
                    {% endif %}
                </tr>
                </thead>
                <tbody>
                {% for job in jobs %}
                    <tr>
                        <td class="text-center">{{ job.id }}</td>
                        <td>{{ job.client.firstName }}</td>
                        <td>{{ job.client.lastName }}</td>
                        <td>{{ job.car.model.name}}</td>
                        <td>{{ job.jobDate | date("d.m.Y") }}</td>
                        <td class="text-center">
                            <div class="btn-group">
                                <a class="btn btn-default btn-xs"
                                   href="#"> Показати </a>
                                {#href="{{ path('cto_client_show', { 'slug': client.slug }) }}"> Показати </a>#}
                                <a class="btn btn-warning btn-xs"
                                href="{{ path('cto_jobs_edit', { 'id': job.id }) }}"> Редагувати </a>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% if paginator %}
                <div class="text-center">
                    {{ knp_pagination_render(jobs) }}
                </div>
            {% endif %}
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    <script>
        jQuery(function ($) {
            $('.date-picker-cto').datepicker({
                format: "dd.mm.yyyy",
                orientation: "top left",
//                todayBtn: "linked",
                todayBtn: true,
                clearBtn: true,
                language: "uk",
                calendarWeeks: true,
                autoclose: true,
                todayHighlight: true
            });
        });
    </script>
{% endblock javascripts %}
